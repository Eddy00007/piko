name: Sync Upstream

env:
  # URL al repositorio upstream (repositorio padre)
  UPSTREAM_URL: "https://github.com/crimera/piko.git"
  # Token para autenticar, usa un token personal en los secretos del repositorio
  WORKFLOW_TOKEN: ${{ secrets.WORKFLOW_TOKEN }}
  # Rama en el repositorio upstream
  UPSTREAM_BRANCH: "dev"
  # Rama en el repositorio downstream (tu fork)
  DOWNSTREAM_BRANCH: "dev"

on:
  schedule:
    - cron: '0 0 * * *'  # Ejecutar diariamente a la medianoche UTC
  workflow_dispatch:  # Permite ejecutar el workflow manualmente

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Sincronizar con el repositorio upstream
        uses: dabreadman/sync-upstream-repo@v1.3.0
        with:
          upstream_repo: ${{ env.UPSTREAM_URL }}
          upstream_branch: ${{ env.UPSTREAM_BRANCH }}
          downstream_branch: ${{ env.DOWNSTREAM_BRANCH }}
          token: ${{ env.WORKFLOW_TOKEN }}
